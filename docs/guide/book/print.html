<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>SCIM Server Guide</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SCIM Server Guide</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="scim-server-guide"><a class="header" href="#scim-server-guide">SCIM Server Guide</a></h1>
<p>Welcome to the comprehensive guide for the SCIM Server library! This guide will take you from initial setup to advanced usage patterns, helping you build robust identity provisioning systems with Rust.</p>
<h2 id="what-is-scim-server"><a class="header" href="#what-is-scim-server">What is SCIM Server?</a></h2>
<p>SCIM Server is a comprehensive Rust library that implements the SCIM 2.0 (System for Cross-domain Identity Management) protocol. It provides a type-safe, high-performance foundation for building identity provisioning and management systems.</p>
<h3 id="why-scim"><a class="header" href="#why-scim">Why SCIM?</a></h3>
<p>SCIM is the industry standard for automating user provisioning between identity providers and applications. Instead of building custom APIs for user management, SCIM provides:</p>
<ul>
<li><strong>Standardized Operations</strong>: Consistent CRUD operations across all systems</li>
<li><strong>Rich Filtering</strong>: Powerful query capabilities for finding users and groups</li>
<li><strong>Bulk Operations</strong>: Efficient handling of large-scale provisioning tasks</li>
<li><strong>Schema Validation</strong>: Automatic validation against well-defined schemas</li>
<li><strong>Interoperability</strong>: Works with existing identity providers and applications</li>
</ul>
<h3 id="why-this-library"><a class="header" href="#why-this-library">Why This Library?</a></h3>
<p>The SCIM Server library takes SCIM implementation to the next level with:</p>
<ul>
<li><strong>🛡️ Type Safety</strong>: Leverage Rust's type system to prevent runtime errors</li>
<li><strong>🏢 Multi-Tenancy</strong>: Built-in support for multiple organizations</li>
<li><strong>⚡ Performance</strong>: Async-first design with minimal overhead</li>
<li><strong>🔌 Flexibility</strong>: Framework-agnostic with pluggable storage</li>
<li><strong>🤖 AI Integration</strong>: Built-in Model Context Protocol support</li>
<li><strong>🔄 Concurrency Control</strong>: ETag-based optimistic locking</li>
</ul>
<h2 id="architecture-overview"><a class="header" href="#architecture-overview">Architecture Overview</a></h2>
<p>The SCIM Server follows a clean three-layer architecture:</p>
<pre><code class="language-text">┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   HTTP Layer    │    │   SCIM Server    │    │   Storage       │
│                 │    │                  │    │                 │
│  • Axum         │───▶│  • Validation    │───▶│  • In-Memory    │
│  • Warp         │    │  • Operations    │    │  • Database     │
│  • Actix        │    │  • Multi-tenant  │    │  • Custom       │
│  • Custom       │    │  • Type Safety   │    │                 │
└─────────────────┘    └──────────────────┘    └─────────────────┘
</code></pre>
<p><strong>HTTP Layer</strong>: Your choice of web framework handles HTTP requests and responses.</p>
<p><strong>SCIM Server</strong>: The core library handles SCIM protocol logic, validation, multi-tenancy, and type safety.</p>
<p><strong>Storage</strong>: Pluggable storage providers handle data persistence, from simple in-memory stores to enterprise databases.</p>
<h2 id="value-proposition"><a class="header" href="#value-proposition">Value Proposition</a></h2>
<p>Instead of building provisioning logic into every application, the SCIM Server centralizes complexity:</p>
<div class="table-wrapper"><table><thead><tr><th><strong>Without SCIM Server</strong></th><th><strong>With SCIM Server</strong></th></tr></thead><tbody>
<tr><td>❌ Custom validation in each app</td><td>✅ Centralized validation engine</td></tr>
<tr><td>❌ Manual concurrency control</td><td>✅ Automatic ETag versioning</td></tr>
<tr><td>❌ Manual schema management</td><td>✅ Dynamic schema registry</td></tr>
<tr><td>❌ Ad-hoc API endpoints</td><td>✅ Standardized SCIM protocol</td></tr>
<tr><td>❌ Build multi-tenancy from scratch</td><td>✅ Built-in tenant isolation</td></tr>
</tbody></table>
</div>
<p><strong>Result</strong>: Your applications focus on business logic while SCIM Server handles all provisioning complexity.</p>
<h2 id="who-should-use-this-guide"><a class="header" href="#who-should-use-this-guide">Who Should Use This Guide?</a></h2>
<p>This guide is designed for:</p>
<ul>
<li><strong>Rust Developers</strong> building identity-aware applications</li>
<li><strong>System Architects</strong> designing multi-tenant SaaS platforms</li>
<li><strong>DevOps Engineers</strong> automating user provisioning workflows</li>
<li><strong>AI Engineers</strong> integrating identity management with AI tools</li>
<li><strong>Security Engineers</strong> implementing enterprise identity solutions</li>
</ul>
<h2 id="how-to-use-this-guide"><a class="header" href="#how-to-use-this-guide">How to Use This Guide</a></h2>
<p>The guide is organized into progressive sections:</p>
<ol>
<li><strong>Getting Started</strong>: Quick setup and basic usage</li>
<li><strong>Core Concepts</strong>: Understanding the fundamental ideas</li>
<li><strong>Tutorials</strong>: Step-by-step guides for common scenarios</li>
<li><strong>How-To Guides</strong>: Solutions for specific problems</li>
<li><strong>Advanced Topics</strong>: Deep dives into complex scenarios</li>
<li><strong>Reference</strong>: Technical specifications and details</li>
</ol>
<h3 id="learning-path"><a class="header" href="#learning-path">Learning Path</a></h3>
<p><strong>New to SCIM?</strong> Start with <a href="./concepts/scim-protocol.html">SCIM Protocol Overview</a> to understand the standard.</p>
<p><strong>Ready to code?</strong> Jump to <a href="./getting-started/first-server.html">Your First SCIM Server</a> for hands-on experience.</p>
<p><strong>Building production systems?</strong> Read through <a href="./concepts/architecture.html">Core Concepts</a> and <a href="./advanced/production-deployment.html">Advanced Topics</a>.</p>
<p><strong>Solving specific problems?</strong> Use the <a href="./how-to/troubleshooting.html">How-To Guides</a> section.</p>
<h2 id="what-youll-learn"><a class="header" href="#what-youll-learn">What You'll Learn</a></h2>
<p>By the end of this guide, you'll be able to:</p>
<ul>
<li>Set up and configure SCIM Server for your use case</li>
<li>Implement multi-tenant identity provisioning systems</li>
<li>Handle complex scenarios like custom resources and authentication</li>
<li>Integrate with web frameworks and AI tools</li>
<li>Deploy production-ready SCIM services</li>
<li>Troubleshoot common issues and optimize performance</li>
</ul>
<h2 id="getting-help"><a class="header" href="#getting-help">Getting Help</a></h2>
<ul>
<li><strong>Examples</strong>: Check the <a href="https://github.com/pukeko37/scim-server/tree/main/examples">examples directory</a> for working code</li>
<li><strong>API Documentation</strong>: See <a href="https://docs.rs/scim-server">docs.rs</a> for detailed API reference</li>
<li><strong>Issues</strong>: Report bugs or ask questions on <a href="https://github.com/pukeko37/scim-server/issues">GitHub Issues</a></li>
</ul>
<p>Let's get started! 🚀</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<p>This guide covers installing and setting up the SCIM Server library in your Rust project.</p>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<p>Before you begin, ensure you have:</p>
<ul>
<li><strong>Rust 1.75 or later</strong> - <a href="https://rustup.rs/">Install Rust</a></li>
<li><strong>Cargo</strong> - Comes with Rust installation</li>
<li>Basic familiarity with Rust and async programming</li>
</ul>
<p>You can verify your Rust installation:</p>
<pre><code class="language-bash">rustc --version
cargo --version
</code></pre>
<h2 id="adding-scim-server-to-your-project"><a class="header" href="#adding-scim-server-to-your-project">Adding SCIM Server to Your Project</a></h2>
<h3 id="option-1-using-cargo-recommended"><a class="header" href="#option-1-using-cargo-recommended">Option 1: Using Cargo (Recommended)</a></h3>
<p>Add SCIM Server to your <code>Cargo.toml</code> dependencies:</p>
<pre><code class="language-toml">[dependencies]
scim-server = "0.3.7"
tokio = { version = "1.0", features = ["full"] }
serde_json = "1.0"
</code></pre>
<blockquote>
<p><strong>⚠️ Version Pinning</strong>: Use flexible versioning (<code>0.3.7</code>) to get patch fixes automatically. For exact version control, use <code>=0.3.7</code>. See <a href="getting-started/../reference/versioning.html">Version Strategy</a> for details.</p>
</blockquote>
<h3 id="option-2-using-cargo-add-command"><a class="header" href="#option-2-using-cargo-add-command">Option 2: Using Cargo Add Command</a></h3>
<pre><code class="language-bash">cargo add scim-server@0.3.7
cargo add tokio --features full
cargo add serde_json
</code></pre>
<h2 id="feature-flags"><a class="header" href="#feature-flags">Feature Flags</a></h2>
<p>SCIM Server provides several optional features to reduce compile time and binary size:</p>
<pre><code class="language-toml">[dependencies]
scim-server = { version = "0.3.7", features = ["mcp"] }
</code></pre>
<p>Available features:</p>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>Description</th><th>Default</th></tr></thead><tbody>
<tr><td><code>mcp</code></td><td>Model Context Protocol for AI integration (includes async-trait and rust-mcp-sdk)</td><td>❌</td></tr>
<tr><td><code>async-trait</code></td><td>Async trait support (included with mcp)</td><td>❌</td></tr>
<tr><td><code>rust-mcp-sdk</code></td><td>MCP SDK dependency (included with mcp)</td><td>❌</td></tr>
</tbody></table>
</div>
<p>Note: Only the <code>mcp</code> feature is currently available. This enables AI integration capabilities through the Model Context Protocol.</p>
<h2 id="development-dependencies"><a class="header" href="#development-dependencies">Development Dependencies</a></h2>
<p>For development and testing, you may want additional dependencies:</p>
<pre><code class="language-toml">[dev-dependencies]
tokio-test = "0.4"
serde_json = "1.0"
uuid = { version = "1.0", features = ["v4"] }
</code></pre>
<h2 id="verification"><a class="header" href="#verification">Verification</a></h2>
<p>Create a simple test to verify your installation:</p>
<pre><pre class="playground"><code class="language-rust no_run"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::{
    StandardResourceProvider,
    InMemoryStorage,
    RequestContext,
    ResourceProvider,  // Required trait for create_resource method
};
use serde_json::json;

#[tokio::test]
async fn test_installation() {
    let storage = InMemoryStorage::new();
    let provider = StandardResourceProvider::new(storage);
    let context = RequestContext::new("test".to_string());
    
    // Test creating a simple resource
    let user_data = json!({
        "userName": "test.user",
        "emails": [{"value": "test@example.com", "primary": true}]
    });
    
    let user = provider.create_resource("User", user_data, &amp;context).await.unwrap();
    
    // If this compiles and runs, installation is successful!
    println!("SCIM Server installed successfully!");
    println!("Created test user: {}", user.get_username().unwrap_or("unknown"));
}
<span class="boring">}</span></code></pre></pre>
<p>Run the test:</p>
<pre><code class="language-bash">cargo test test_installation
</code></pre>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<p>Now that you have SCIM Server installed, you're ready to:</p>
<ol>
<li><strong><a href="getting-started/./first-server.html">Create Your First Server</a></strong> - Build a basic SCIM server</li>
<li><strong><a href="getting-started/./basic-operations.html">Learn Basic Operations</a></strong> - Understand CRUD operations</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="your-first-scim-server"><a class="header" href="#your-first-scim-server">Your First SCIM Server</a></h1>
<p>This tutorial walks you through creating your first SCIM server from scratch. By the end, you'll have a working SCIM server that can manage users and groups with full CRUD operations.</p>
<h2 id="what-well-build"><a class="header" href="#what-well-build">What We'll Build</a></h2>
<p>We'll create a simple SCIM server that:</p>
<ul>
<li>Manages users and groups</li>
<li>Supports basic CRUD operations</li>
<li>Uses in-memory storage for simplicity</li>
<li>Includes proper error handling</li>
<li>Demonstrates multi-tenant capabilities</li>
</ul>
<h2 id="step-1-project-setup"><a class="header" href="#step-1-project-setup">Step 1: Project Setup</a></h2>
<p>First, create a new Rust project:</p>
<pre><code class="language-bash">cargo new my-scim-server
cd my-scim-server
</code></pre>
<p>Add the required dependencies to your <code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[dependencies]
scim-server = "0.3.7"
tokio = { version = "1.0", features = ["full"] }
serde_json = "1.0"
anyhow = "1.0"
</code></pre>
<h2 id="step-2-basic-server-setup"><a class="header" href="#step-2-basic-server-setup">Step 2: Basic Server Setup</a></h2>
<p>Create your first SCIM server in <code>src/main.rs</code>:</p>
<pre><pre class="playground"><code class="language-rust">use scim_server::{
    ScimServer,
    StandardResourceProvider,
    InMemoryStorage,
    RequestContext, ResourceProvider,
    resource_handlers::{create_user_resource_handler, create_group_resource_handler},
    SchemaRegistry,
    ScimOperation,
};
use serde_json::json;

#[tokio::main]
async fn main() -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {
    println!("🚀 Starting SCIM Server...");
    
    // Create storage backend
    let storage = InMemoryStorage::new();
    
    // Create resource provider with storage
    let provider = StandardResourceProvider::new(storage);
    
    // Create SCIM server with provider
    let mut server = ScimServer::new(provider)?;
    
    // Create schema registry (needed for both user and group schemas)
    let schema_registry = SchemaRegistry::new()?;
    
    // Register User resource type
    let user_schema = schema_registry.get_user_schema();
    let user_handler = create_user_resource_handler(user_schema.clone());
    server.register_resource_type(
        "User",
        user_handler,
        vec![
            ScimOperation::Create,
            ScimOperation::Read,
            ScimOperation::Update,
            ScimOperation::Delete,
            ScimOperation::List,
            ScimOperation::Search,
        ],
    )?;
    
    // Register Group resource type
    let group_schema = schema_registry.get_group_schema();
    let group_handler = create_group_resource_handler(group_schema.clone());
    server.register_resource_type(
        "Group",
        group_handler,
        vec![
            ScimOperation::Create,
            ScimOperation::Read,
            ScimOperation::Update,
            ScimOperation::Delete,
            ScimOperation::List,
            ScimOperation::Search,
        ],
    )?;
    
    println!("✅ SCIM Server initialized successfully!");
    
    // We'll add operations here in the next steps
    
    Ok(())
}</code></pre></pre>
<p>Run this to verify everything works:</p>
<pre><code class="language-bash">cargo run
</code></pre>
<p>You should see:</p>
<pre><code>🚀 Starting SCIM Server...
✅ SCIM Server initialized successfully!
</code></pre>
<h2 id="step-3-creating-your-first-user"><a class="header" href="#step-3-creating-your-first-user">Step 3: Creating Your First User</a></h2>
<p>Now let's create a user. Add this after the server initialization:</p>
<pre><pre class="playground"><code class="language-rust">#[tokio::main]
async fn main() -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {
    // ... previous setup code ...
    
    println!("✅ SCIM Server initialized successfully!");
    
    // Create a request context for our operations
    let context = RequestContext::with_generated_id();
    
    println!("\n📝 Creating a user...");
    
    // Define user data
    let user_data = json!({
        "userName": "alice@example.com",
        "name": {
            "formatted": "Alice Smith",
            "familyName": "Smith",
            "givenName": "Alice"
        },
        "displayName": "Alice Smith",
        "emails": [
            {
                "value": "alice@example.com",
                "type": "work",
                "primary": true
            }
        ],
        "phoneNumbers": [
            {
                "value": "+1-555-123-4567",
                "type": "work"
            }
        ],
        "active": true
    });
    
    // Create the user
    let user = server.create_resource("User", user_data, &amp;context).await?;
    
    println!("✅ Created user: {} (ID: {})", 
             user.get_username().unwrap_or("unknown"),
             user.get_id().unwrap_or("unknown"));
    
    Ok(())
}</code></pre></pre>
<p>Run this:</p>
<pre><code class="language-bash">cargo run
</code></pre>
<p>You should see:</p>
<pre><code>🚀 Starting SCIM Server...
✅ SCIM Server initialized successfully!

📝 Creating a user...
✅ Created user: alice@example.com (ID: user_abc123)
</code></pre>
<h2 id="step-4-reading-and-updating-users"><a class="header" href="#step-4-reading-and-updating-users">Step 4: Reading and Updating Users</a></h2>
<p>Let's add operations to read and update users:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ... after creating the user ...

println!("\n📖 Reading the user...");

// Get the user by ID
let user_id = user.get_id().unwrap();
let retrieved_user = server.get_resource("User", user_id, &amp;context).await?;

match retrieved_user {
    Some(user) =&gt; {
        println!("✅ Retrieved user: {} ({})", 
                 user.get_username().unwrap_or("unknown"),
                 user.get_name().map(|n| n.formatted.unwrap_or_default()).unwrap_or("unknown".to_string()));
    }
    None =&gt; {
        println!("❌ User not found");
    }
}

println!("\n📝 Updating the user...");

// Update user data
let updated_data = json!({
    "id": user_id,
    "userName": "alice@example.com",
    "name": {
        "formatted": "Alice Johnson",
        "familyName": "Johnson",  // Changed last name
        "givenName": "Alice"
    },
    "displayName": "Alice Johnson",
    "emails": [
        {
            "value": "alice@example.com",
            "type": "work",
            "primary": true
        },
        {
            "value": "alice.johnson@personal.com",  // Added personal email
            "type": "home",
            "primary": false
        }
    ],
    "active": true
});

// Update the user
let updated_user = server.update_resource("User", user_id, updated_data, &amp;context).await?;

println!("✅ Updated user: {} ({})", 
         updated_user.get_username().unwrap_or("unknown"),
         updated_user.get_name().map(|n| n.formatted.unwrap_or_default()).unwrap_or("unknown".to_string()));
<span class="boring">}</span></code></pre></pre>
<h2 id="step-5-working-with-groups"><a class="header" href="#step-5-working-with-groups">Step 5: Working with Groups</a></h2>
<p>Let's create a group and manage membership:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ... after updating the user ...

println!("\n👥 Creating a group...");

let group_data = json!({
    "displayName": "Engineering Team",
    "members": [
        {
            "value": user_id,
            "display": "Alice Johnson",
            "type": "User"
        }
    ]
});

// Create the group
let group = server.create_resource("Group", group_data, &amp;context).await?;

println!("✅ Created group: {} (ID: {})", 
         group.get_name().map(|n| n.formatted.unwrap_or_default()).unwrap_or("unknown".to_string()),
         group.get_id().unwrap_or("unknown"));
<span class="boring">}</span></code></pre></pre>
<h2 id="step-6-listing-resources"><a class="header" href="#step-6-listing-resources">Step 6: Listing Resources</a></h2>
<p>Add functionality to list users and groups:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ... after creating the group ...

println!("\n📋 Listing all users...");

// List all users
let users = server.list_resources("User", None, &amp;context).await?;
println!("✅ Found {} users:", users.len());
for user in &amp;users {
    println!("  - {} ({})", 
             user.get_username().unwrap_or("unknown"),
             user.get_name().map(|n| n.formatted.unwrap_or_default()).unwrap_or("unknown".to_string()));
}

println!("\n📋 Listing all groups...");

// List all groups
let groups = server.list_resources("Group", None, &amp;context).await?;
println!("✅ Found {} groups:", groups.len());
for group in &amp;groups {
    println!("  - {} (ID: {})", 
             group.get_name().map(|n| n.formatted.unwrap_or_default()).unwrap_or("unknown".to_string()),
             group.get_id().unwrap_or("unknown"));
}
<span class="boring">}</span></code></pre></pre>
<h2 id="step-7-search-operations"><a class="header" href="#step-7-search-operations">Step 7: Search Operations</a></h2>
<p>Add search functionality:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// ... after listing resources ...

println!("\n🔍 Searching for users...");

// Search for user by username
let found_user = server.find_resource_by_attribute(
    "User",
    "userName",
    &amp;json!("alice@example.com"),
    &amp;context,
).await?;

match found_user {
    Some(user) =&gt; {
        println!("✅ Found user by username: {} ({})", 
                 user.get_username().unwrap_or("unknown"),
                 user.get_name().map(|n| n.formatted.unwrap_or_default()).unwrap_or("unknown".to_string()));
    }
    None =&gt; {
        println!("❌ User not found");
    }
}
<span class="boring">}</span></code></pre></pre>
<h2 id="step-8-multi-tenant-operations"><a class="header" href="#step-8-multi-tenant-operations">Step 8: Multi-Tenant Operations</a></h2>
<p>Finally, let's demonstrate multi-tenant capabilities:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::resource::TenantContext;

// ... after search operations ...

println!("\n🏢 Multi-tenant operations...");

// Create tenant-specific context
let tenant_context = TenantContext::new(
    "company-123".to_string(),
    "app-456".to_string(),
);
let tenant_request_context = RequestContext::with_tenant_generated_id(tenant_context);

// Create user in specific tenant
let tenant_user_data = json!({
    "userName": "bob@company123.com",
    "name": {
        "formatted": "Bob Wilson",
        "familyName": "Wilson",
        "givenName": "Bob"
    },
    "displayName": "Bob Wilson",
    "active": true
});

let tenant_user = server.create_resource("User", tenant_user_data, &amp;tenant_request_context).await?;

println!("✅ Created user in tenant: {} (ID: {})", 
         tenant_user.get_username().unwrap_or("unknown"),
         tenant_user.get_id().unwrap_or("unknown"));

// Show tenant isolation
let default_users = server.list_resources("User", None, &amp;context).await?;
let tenant_users = server.list_resources("User", None, &amp;tenant_request_context).await?;

println!("📊 Default tenant has {} users", default_users.len());
println!("📊 Company-123 tenant has {} users", tenant_users.len());
println!("✅ Tenant isolation working correctly!");
<span class="boring">}</span></code></pre></pre>
<h2 id="complete-example"><a class="header" href="#complete-example">Complete Example</a></h2>
<p>Here's the complete working example:</p>
<pre><pre class="playground"><code class="language-rust">use scim_server::{
    ScimServer,
    StandardResourceProvider,
    InMemoryStorage,
    RequestContext, TenantContext, ResourceProvider,
    resource_handlers::{create_user_resource_handler, create_group_resource_handler},
    SchemaRegistry,
    ScimOperation,
};
use serde_json::json;

#[tokio::main]
async fn main() -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {
    println!("🚀 Starting SCIM Server...");
    
    // Create storage backend
    let storage = InMemoryStorage::new();
    
    // Create resource provider with storage
    let provider = StandardResourceProvider::new(storage);
    
    // Create SCIM server with provider
    let mut server = ScimServer::new(provider)?;
    
    // Create schema registry (needed for both user and group schemas)
    let schema_registry = SchemaRegistry::new()?;
    
    // Register User resource type
    let user_schema = schema_registry.get_user_schema();
    let user_handler = create_user_resource_handler(user_schema.clone());
    server.register_resource_type(
        "User",
        user_handler,
        vec![
            ScimOperation::Create,
            ScimOperation::Read,
            ScimOperation::Update,
            ScimOperation::Delete,
            ScimOperation::List,
            ScimOperation::Search,
        ],
    )?;
    
    // Register Group resource type
    let group_schema = schema_registry.get_group_schema();
    let group_handler = create_group_resource_handler(group_schema.clone());
    server.register_resource_type(
        "Group",
        group_handler,
        vec![
            ScimOperation::Create,
            ScimOperation::Read,
            ScimOperation::Update,
            ScimOperation::Delete,
            ScimOperation::List,
            ScimOperation::Search,
        ],
    )?;
    
    println!("✅ SCIM Server initialized successfully!");
    
    // Create request context
    let context = RequestContext::with_generated_id();
    
    // Create a user
    let user_data = json!({
        "userName": "alice@example.com",
        "name": {
            "formatted": "Alice Smith",
            "familyName": "Smith",
            "givenName": "Alice"
        },
        "displayName": "Alice Smith",
        "emails": [
            {
                "value": "alice@example.com",
                "type": "work",
                "primary": true
            }
        ],
        "active": true
    });
    
    let user = server.create_resource("User", user_data, &amp;context).await?;
    let user_id = user.get_id().unwrap();
    
    println!("✅ Created user: {} (ID: {})", 
             user.get_username().unwrap_or("unknown"), user_id);
    
    // Create a group
    let group_data = json!({
        "displayName": "Engineering Team",
        "members": [
            {
                "value": user_id,
                "display": "Alice Smith",
                "type": "User"
            }
        ]
    });
    
    let group = server.create_resource("Group", group_data, &amp;context).await?;
    
    println!("✅ Created group: {} (ID: {})", 
             group.get_name().map(|n| n.formatted.unwrap_or_default()).unwrap_or("unknown".to_string()),
             group.get_id().unwrap_or("unknown"));
    
    // List resources
    let users = server.list_resources("User", None, &amp;context).await?;
    let groups = server.list_resources("Group", None, &amp;context).await?;
    
    println!("📊 Total: {} users, {} groups", users.len(), groups.len());
    
    println!("🎉 SCIM Server example completed successfully!");
    
    Ok(())
}</code></pre></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>


    </div>
    </body>
</html>
