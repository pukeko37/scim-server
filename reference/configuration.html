<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Configuration Options - SCIM Server Guide</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SCIM Server Guide</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="configuration-options"><a class="header" href="#configuration-options">Configuration Options</a></h1>
<p>This reference documents all configuration options available in the SCIM Server library, including server settings, provider configurations, and runtime parameters.</p>
<h2 id="configuration-overview"><a class="header" href="#configuration-overview">Configuration Overview</a></h2>
<p>The SCIM Server library supports multiple configuration approaches:</p>
<ol>
<li><strong>Builder Pattern</strong> - Programmatic configuration with type safety</li>
<li><strong>Environment Variables</strong> - Runtime configuration for deployment</li>
<li><strong>Configuration Files</strong> - TOML/JSON files for complex setups</li>
<li><strong>Hybrid Approach</strong> - Combining multiple configuration sources</li>
</ol>
<h2 id="server-configuration"><a class="header" href="#server-configuration">Server Configuration</a></h2>
<h3 id="basic-server-setup"><a class="header" href="#basic-server-setup">Basic Server Setup</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::{ScimServer, ServerConfig};

let config = ServerConfig::builder()
    .bind_address("0.0.0.0:8080")
    .max_connections(1000)
    .request_timeout_ms(30000)
    .enable_cors(true)
    .build()?;

let server = ScimServer::with_config(storage, config).await?;
<span class="boring">}</span></code></pre></pre>
<h3 id="serverconfig-options"><a class="header" href="#serverconfig-options">ServerConfig Options</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bind_address</code></td><td><code>String</code></td><td><code>"127.0.0.1:3000"</code></td><td>Address and port to bind the server</td></tr>
<tr><td><code>max_connections</code></td><td><code>u32</code></td><td><code>512</code></td><td>Maximum concurrent connections</td></tr>
<tr><td><code>request_timeout_ms</code></td><td><code>u64</code></td><td><code>30000</code></td><td>Request timeout in milliseconds</td></tr>
<tr><td><code>keep_alive_timeout_ms</code></td><td><code>u64</code></td><td><code>60000</code></td><td>Keep-alive connection timeout</td></tr>
<tr><td><code>max_request_size</code></td><td><code>usize</code></td><td><code>1048576</code></td><td>Maximum request body size (1MB)</td></tr>
<tr><td><code>enable_cors</code></td><td><code>bool</code></td><td><code>false</code></td><td>Enable CORS headers</td></tr>
<tr><td><code>cors_origins</code></td><td><code>Vec&lt;String&gt;</code></td><td><code>["*"]</code></td><td>Allowed CORS origins</td></tr>
<tr><td><code>enable_compression</code></td><td><code>bool</code></td><td><code>true</code></td><td>Enable gzip compression</td></tr>
<tr><td><code>thread_pool_size</code></td><td><code>Option&lt;usize&gt;</code></td><td><code>None</code></td><td>Custom thread pool size</td></tr>
</tbody></table>
</div>
<h3 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h3>
<p>All server options can be configured via environment variables:</p>
<pre><code class="language-bash">export SCIM_BIND_ADDRESS="0.0.0.0:8080"
export SCIM_MAX_CONNECTIONS=2000
export SCIM_REQUEST_TIMEOUT_MS=45000
export SCIM_ENABLE_CORS=true
export SCIM_CORS_ORIGINS="https://app.example.com,https://admin.example.com"
export SCIM_MAX_REQUEST_SIZE=2097152
</code></pre>
<h3 id="configuration-file"><a class="header" href="#configuration-file">Configuration File</a></h3>
<p>Create a <code>scim-config.toml</code> file:</p>
<pre><code class="language-toml">[server]
bind_address = "0.0.0.0:8080"
max_connections = 1000
request_timeout_ms = 30000
keep_alive_timeout_ms = 60000
max_request_size = 1048576
enable_cors = true
cors_origins = ["https://app.example.com"]
enable_compression = true
thread_pool_size = 8

[logging]
level = "info"
format = "json"
file_path = "/var/log/scim-server.log"
max_file_size = "100MB"
max_files = 10

[security]
require_https = true
allowed_auth_methods = ["bearer", "basic"]
token_validation_endpoint = "https://auth.example.com/validate"
</code></pre>
<p>Load the configuration:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::config::load_config;

let config = load_config("scim-config.toml")?;
let server = ScimServer::with_config(storage, config).await?;
<span class="boring">}</span></code></pre></pre>
<h2 id="storage-provider-configuration"><a class="header" href="#storage-provider-configuration">Storage Provider Configuration</a></h2>
<h3 id="in-memory-storage"><a class="header" href="#in-memory-storage">In-Memory Storage</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::storage::{InMemoryStorage, InMemoryConfig};

let config = InMemoryConfig::builder()
    .initial_capacity(10000)
    .enable_persistence(true)
    .persistence_file("/data/scim-backup.json")
    .backup_interval_ms(300000) // 5 minutes
    .build()?;

let storage = InMemoryStorage::with_config(config)?;
<span class="boring">}</span></code></pre></pre>
<h4 id="inmemoryconfig-options"><a class="header" href="#inmemoryconfig-options">InMemoryConfig Options</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr><td><code>initial_capacity</code></td><td><code>usize</code></td><td><code>1000</code></td><td>Initial HashMap capacity</td></tr>
<tr><td><code>enable_persistence</code></td><td><code>bool</code></td><td><code>false</code></td><td>Enable periodic backups</td></tr>
<tr><td><code>persistence_file</code></td><td><code>Option&lt;PathBuf&gt;</code></td><td><code>None</code></td><td>Backup file path</td></tr>
<tr><td><code>backup_interval_ms</code></td><td><code>u64</code></td><td><code>300000</code></td><td>Backup interval (5 min)</td></tr>
<tr><td><code>compression</code></td><td><code>bool</code></td><td><code>true</code></td><td>Compress backup files</td></tr>
<tr><td><code>max_memory_mb</code></td><td><code>Option&lt;usize&gt;</code></td><td><code>None</code></td><td>Memory usage limit</td></tr>
</tbody></table>
</div>
<h3 id="database-storage"><a class="header" href="#database-storage">Database Storage</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::storage::{DatabaseStorage, DatabaseConfig};

let config = DatabaseConfig::builder()
    .connection_url("postgresql://user:pass@localhost/scim")
    .max_connections(20)
    .connection_timeout_ms(5000)
    .idle_timeout_ms(600000)
    .enable_ssl(true)
    .migration_auto_run(true)
    .build()?;

let storage = DatabaseStorage::with_config(config).await?;
<span class="boring">}</span></code></pre></pre>
<h4 id="databaseconfig-options"><a class="header" href="#databaseconfig-options">DatabaseConfig Options</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr><td><code>connection_url</code></td><td><code>String</code></td><td>Required</td><td>Database connection URL</td></tr>
<tr><td><code>max_connections</code></td><td><code>u32</code></td><td><code>10</code></td><td>Connection pool size</td></tr>
<tr><td><code>min_connections</code></td><td><code>u32</code></td><td><code>1</code></td><td>Minimum pool connections</td></tr>
<tr><td><code>connection_timeout_ms</code></td><td><code>u64</code></td><td><code>30000</code></td><td>Connection timeout</td></tr>
<tr><td><code>idle_timeout_ms</code></td><td><code>u64</code></td><td><code>600000</code></td><td>Idle connection timeout</td></tr>
<tr><td><code>max_lifetime_ms</code></td><td><code>Option&lt;u64&gt;</code></td><td><code>None</code></td><td>Max connection lifetime</td></tr>
<tr><td><code>enable_ssl</code></td><td><code>bool</code></td><td><code>false</code></td><td>Require SSL connections</td></tr>
<tr><td><code>ssl_ca_file</code></td><td><code>Option&lt;PathBuf&gt;</code></td><td><code>None</code></td><td>SSL CA certificate file</td></tr>
<tr><td><code>migration_auto_run</code></td><td><code>bool</code></td><td><code>true</code></td><td>Auto-run migrations</td></tr>
<tr><td><code>query_timeout_ms</code></td><td><code>u64</code></td><td><code>30000</code></td><td>Query execution timeout</td></tr>
<tr><td><code>enable_logging</code></td><td><code>bool</code></td><td><code>false</code></td><td>Log SQL queries</td></tr>
</tbody></table>
</div>
<h3 id="custom-storage-provider"><a class="header" href="#custom-storage-provider">Custom Storage Provider</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::storage::{StorageProvider, ProviderConfig};

#[derive(Debug, Clone)]
pub struct CustomConfig {
    pub api_endpoint: String,
    pub api_key: String,
    pub timeout_ms: u64,
    pub retry_attempts: u32,
}

impl ProviderConfig for CustomConfig {
    fn validate(&amp;self) -&gt; Result&lt;(), ConfigError&gt; {
        if self.api_endpoint.is_empty() {
            return Err(ConfigError::MissingRequired("api_endpoint"));
        }
        if self.timeout_ms == 0 {
            return Err(ConfigError::InvalidValue("timeout_ms must be &gt; 0"));
        }
        Ok(())
    }
}
<span class="boring">}</span></code></pre></pre>
<h2 id="multi-tenancy-configuration"><a class="header" href="#multi-tenancy-configuration">Multi-Tenancy Configuration</a></h2>
<h3 id="tenant-settings"><a class="header" href="#tenant-settings">Tenant Settings</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::{MultiTenantConfig, TenantConfig};

let tenant_config = TenantConfig::builder()
    .tenant_id("acme-corp")
    .display_name("ACME Corporation")
    .max_users(5000)
    .max_groups(500)
    .storage_isolation_level("strict")
    .custom_schemas(vec!["urn:acme:schemas:employee"])
    .rate_limit_per_minute(1000)
    .enable_bulk_operations(true)
    .data_retention_days(2555) // 7 years
    .build()?;

let multi_tenant_config = MultiTenantConfig::builder()
    .default_tenant_config(tenant_config)
    .tenant_resolver("header") // "header", "subdomain", "path"
    .tenant_header_name("X-Tenant-ID")
    .enable_tenant_creation(false)
    .build()?;
<span class="boring">}</span></code></pre></pre>
<h4 id="tenantconfig-options"><a class="header" href="#tenantconfig-options">TenantConfig Options</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr><td><code>tenant_id</code></td><td><code>String</code></td><td>Required</td><td>Unique tenant identifier</td></tr>
<tr><td><code>display_name</code></td><td><code>String</code></td><td><code>tenant_id</code></td><td>Human-readable name</td></tr>
<tr><td><code>max_users</code></td><td><code>Option&lt;u32&gt;</code></td><td><code>None</code></td><td>Maximum user limit</td></tr>
<tr><td><code>max_groups</code></td><td><code>Option&lt;u32&gt;</code></td><td><code>None</code></td><td>Maximum group limit</td></tr>
<tr><td><code>storage_isolation_level</code></td><td><code>String</code></td><td><code>"strict"</code></td><td><code>"strict"</code>, <code>"logical"</code>, <code>"none"</code></td></tr>
<tr><td><code>custom_schemas</code></td><td><code>Vec&lt;String&gt;</code></td><td><code>[]</code></td><td>Additional schema URIs</td></tr>
<tr><td><code>rate_limit_per_minute</code></td><td><code>Option&lt;u32&gt;</code></td><td><code>None</code></td><td>Tenant-specific rate limit</td></tr>
<tr><td><code>enable_pagination</code></td><td><code>bool</code></td><td><code>true</code></td><td>Enable paginated list responses</td></tr>
<tr><td><code>max_page_size</code></td><td><code>u32</code></td><td><code>1000</code></td><td>Maximum items per page in list requests</td></tr>
<tr><td><code>data_retention_days</code></td><td><code>Option&lt;u32&gt;</code></td><td><code>None</code></td><td>Data retention policy</td></tr>
<tr><td><code>encryption_key_id</code></td><td><code>Option&lt;String&gt;</code></td><td><code>None</code></td><td>Tenant-specific encryption</td></tr>
</tbody></table>
</div>
<h3 id="tenant-resolution"><a class="header" href="#tenant-resolution">Tenant Resolution</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Header-based tenant resolution
let config = MultiTenantConfig::builder()
    .tenant_resolver("header")
    .tenant_header_name("X-Tenant-ID")
    .build()?;

// Subdomain-based tenant resolution  
let config = MultiTenantConfig::builder()
    .tenant_resolver("subdomain")
    .subdomain_pattern("{tenant}.api.example.com")
    .build()?;

// Path-based tenant resolution
let config = MultiTenantConfig::builder()
    .tenant_resolver("path")
    .path_pattern("/tenants/{tenant}/scim")
    .build()?;
<span class="boring">}</span></code></pre></pre>
<h2 id="security-configuration"><a class="header" href="#security-configuration">Security Configuration</a></h2>
<h3 id="authentication"><a class="header" href="#authentication">Authentication</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::auth::{AuthConfig, AuthMethod};

let auth_config = AuthConfig::builder()
    .enabled_methods(vec![AuthMethod::Bearer, AuthMethod::Basic])
    .bearer_token_validation("jwt") // "jwt", "opaque", "custom"
    .jwt_issuer("https://auth.example.com")
    .jwt_audience("scim-api")
    .jwt_public_key_url("https://auth.example.com/.well-known/jwks.json")
    .basic_auth_realm("SCIM API")
    .token_cache_ttl_ms(300000) // 5 minutes
    .enable_token_introspection(true)
    .introspection_endpoint("https://auth.example.com/introspect")
    .build()?;
<span class="boring">}</span></code></pre></pre>
<h4 id="authconfig-options"><a class="header" href="#authconfig-options">AuthConfig Options</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr><td><code>enabled_methods</code></td><td><code>Vec&lt;AuthMethod&gt;</code></td><td><code>[Bearer]</code></td><td>Allowed auth methods</td></tr>
<tr><td><code>bearer_token_validation</code></td><td><code>String</code></td><td><code>"opaque"</code></td><td>Token validation method</td></tr>
<tr><td><code>jwt_issuer</code></td><td><code>Option&lt;String&gt;</code></td><td><code>None</code></td><td>JWT issuer for validation</td></tr>
<tr><td><code>jwt_audience</code></td><td><code>Option&lt;String&gt;</code></td><td><code>None</code></td><td>Expected JWT audience</td></tr>
<tr><td><code>jwt_public_key_url</code></td><td><code>Option&lt;String&gt;</code></td><td><code>None</code></td><td>JWK Set URL for JWT validation</td></tr>
<tr><td><code>jwt_algorithm</code></td><td><code>String</code></td><td><code>"RS256"</code></td><td>JWT signing algorithm</td></tr>
<tr><td><code>basic_auth_realm</code></td><td><code>String</code></td><td><code>"SCIM"</code></td><td>Basic auth realm</td></tr>
<tr><td><code>token_cache_ttl_ms</code></td><td><code>u64</code></td><td><code>300000</code></td><td>Token validation cache TTL</td></tr>
<tr><td><code>enable_token_introspection</code></td><td><code>bool</code></td><td><code>false</code></td><td>Use OAuth2 token introspection</td></tr>
<tr><td><code>introspection_endpoint</code></td><td><code>Option&lt;String&gt;</code></td><td><code>None</code></td><td>Token introspection endpoint</td></tr>
<tr><td><code>client_id</code></td><td><code>Option&lt;String&gt;</code></td><td><code>None</code></td><td>OAuth2 client ID</td></tr>
<tr><td><code>client_secret</code></td><td><code>Option&lt;String&gt;</code></td><td><code>None</code></td><td>OAuth2 client secret</td></tr>
</tbody></table>
</div>
<h3 id="tls-configuration"><a class="header" href="#tls-configuration">TLS Configuration</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::tls::{TlsConfig, TlsVersion};

let tls_config = TlsConfig::builder()
    .certificate_file("/etc/ssl/certs/server.crt")
    .private_key_file("/etc/ssl/private/server.key")
    .ca_certificate_file("/etc/ssl/certs/ca.crt")
    .min_tls_version(TlsVersion::V1_2)
    .require_client_cert(false)
    .cipher_suites(vec![
        "TLS_AES_256_GCM_SHA384",
        "TLS_CHACHA20_POLY1305_SHA256"
    ])
    .build()?;
<span class="boring">}</span></code></pre></pre>
<h2 id="logging-configuration"><a class="header" href="#logging-configuration">Logging Configuration</a></h2>
<h3 id="basic-logging-setup"><a class="header" href="#basic-logging-setup">Basic Logging Setup</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::logging::{LoggingConfig, LogLevel, LogFormat};

let logging_config = LoggingConfig::builder()
    .level(LogLevel::Info)
    .format(LogFormat::Json)
    .enable_console(true)
    .enable_file(true)
    .file_path("/var/log/scim-server.log")
    .max_file_size("100MB")
    .max_files(10)
    .enable_compression(true)
    .fields(vec!["timestamp", "level", "message", "tenant_id", "user_id"])
    .build()?;
<span class="boring">}</span></code></pre></pre>
<h4 id="loggingconfig-options"><a class="header" href="#loggingconfig-options">LoggingConfig Options</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr><td><code>level</code></td><td><code>LogLevel</code></td><td><code>Info</code></td><td>Minimum log level</td></tr>
<tr><td><code>format</code></td><td><code>LogFormat</code></td><td><code>Text</code></td><td>Log output format</td></tr>
<tr><td><code>enable_console</code></td><td><code>bool</code></td><td><code>true</code></td><td>Log to console/stdout</td></tr>
<tr><td><code>enable_file</code></td><td><code>bool</code></td><td><code>false</code></td><td>Log to files</td></tr>
<tr><td><code>file_path</code></td><td><code>Option&lt;PathBuf&gt;</code></td><td><code>None</code></td><td>Log file path</td></tr>
<tr><td><code>max_file_size</code></td><td><code>String</code></td><td><code>"100MB"</code></td><td>Maximum log file size</td></tr>
<tr><td><code>max_files</code></td><td><code>u32</code></td><td><code>10</code></td><td>Number of rotated files</td></tr>
<tr><td><code>enable_compression</code></td><td><code>bool</code></td><td><code>true</code></td><td>Compress rotated logs</td></tr>
<tr><td><code>fields</code></td><td><code>Vec&lt;String&gt;</code></td><td>Default set</td><td>Fields to include in logs</td></tr>
<tr><td><code>exclude_paths</code></td><td><code>Vec&lt;String&gt;</code></td><td><code>[]</code></td><td>Paths to exclude from logging</td></tr>
<tr><td><code>enable_request_logging</code></td><td><code>bool</code></td><td><code>true</code></td><td>Log HTTP requests</td></tr>
<tr><td><code>log_request_body</code></td><td><code>bool</code></td><td><code>false</code></td><td>Include request body in logs</td></tr>
<tr><td><code>log_response_body</code></td><td><code>bool</code></td><td><code>false</code></td><td>Include response body in logs</td></tr>
</tbody></table>
</div>
<h3 id="structured-logging"><a class="header" href="#structured-logging">Structured Logging</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use tracing::{info, warn, error};
use tracing_subscriber::{layer::SubscriberExt, util::SubscriberInitExt};

// Custom logging setup
tracing_subscriber::registry()
    .with(tracing_subscriber::EnvFilter::new("scim_server=info"))
    .with(tracing_subscriber::fmt::layer()
        .json()
        .with_current_span(false)
        .with_span_list(true))
    .init();

// Usage in code
info!(
    tenant_id = %tenant_id,
    user_id = %user_id,
    operation = "create_user",
    "User created successfully"
);
<span class="boring">}</span></code></pre></pre>
<h2 id="performance-configuration"><a class="header" href="#performance-configuration">Performance Configuration</a></h2>
<h3 id="caching"><a class="header" href="#caching">Caching</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::cache::{CacheConfig, CacheBackend};

let cache_config = CacheConfig::builder()
    .backend(CacheBackend::InMemory)
    .max_entries(10000)
    .ttl_ms(300000) // 5 minutes
    .enable_user_cache(true)
    .enable_group_cache(true)
    .enable_schema_cache(true)
    .cache_key_prefix("scim:")
    .enable_compression(true)
    .build()?;
<span class="boring">}</span></code></pre></pre>
<h4 id="cacheconfig-options"><a class="header" href="#cacheconfig-options">CacheConfig Options</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr><td><code>backend</code></td><td><code>CacheBackend</code></td><td><code>InMemory</code></td><td>Cache storage backend</td></tr>
<tr><td><code>max_entries</code></td><td><code>usize</code></td><td><code>1000</code></td><td>Maximum cached entries</td></tr>
<tr><td><code>ttl_ms</code></td><td><code>u64</code></td><td><code>300000</code></td><td>Time-to-live in milliseconds</td></tr>
<tr><td><code>enable_user_cache</code></td><td><code>bool</code></td><td><code>true</code></td><td>Cache user resources</td></tr>
<tr><td><code>enable_group_cache</code></td><td><code>bool</code></td><td><code>true</code></td><td>Cache group resources</td></tr>
<tr><td><code>enable_schema_cache</code></td><td><code>bool</code></td><td><code>true</code></td><td>Cache schema definitions</td></tr>
<tr><td><code>cache_key_prefix</code></td><td><code>String</code></td><td><code>"scim:"</code></td><td>Prefix for cache keys</td></tr>
<tr><td><code>enable_compression</code></td><td><code>bool</code></td><td><code>false</code></td><td>Compress cached values</td></tr>
<tr><td><code>redis_url</code></td><td><code>Option&lt;String&gt;</code></td><td><code>None</code></td><td>Redis connection URL</td></tr>
<tr><td><code>redis_pool_size</code></td><td><code>u32</code></td><td><code>10</code></td><td>Redis connection pool size</td></tr>
</tbody></table>
</div>
<h3 id="rate-limiting"><a class="header" href="#rate-limiting">Rate Limiting</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::rate_limit::{RateLimitConfig, RateLimitAlgorithm};

let rate_limit_config = RateLimitConfig::builder()
    .algorithm(RateLimitAlgorithm::TokenBucket)
    .requests_per_minute(1000)
    .burst_size(100)
    .enable_per_tenant_limits(true)
    .enable_per_user_limits(false)
    .storage_backend("memory") // "memory", "redis"
    .redis_url("redis://localhost:6379")
    .window_size_ms(60000)
    .build()?;
<span class="boring">}</span></code></pre></pre>
<h2 id="validation-configuration"><a class="header" href="#validation-configuration">Validation Configuration</a></h2>
<h3 id="schema-validation"><a class="header" href="#schema-validation">Schema Validation</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::validation::{ValidationConfig, ValidationMode};

let validation_config = ValidationConfig::builder()
    .mode(ValidationMode::Strict)
    .enable_custom_validators(true)
    .allow_unknown_attributes(false)
    .require_schemas_field(true)
    .validate_references(true)
    .max_string_length(1000)
    .max_array_size(100)
    .custom_validators_path("./validators")
    .build()?;
<span class="boring">}</span></code></pre></pre>
<h4 id="validationconfig-options"><a class="header" href="#validationconfig-options">ValidationConfig Options</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr><td><code>mode</code></td><td><code>ValidationMode</code></td><td><code>Strict</code></td><td>Validation strictness level</td></tr>
<tr><td><code>enable_custom_validators</code></td><td><code>bool</code></td><td><code>false</code></td><td>Enable custom validation logic</td></tr>
<tr><td><code>allow_unknown_attributes</code></td><td><code>bool</code></td><td><code>false</code></td><td>Allow undefined attributes</td></tr>
<tr><td><code>require_schemas_field</code></td><td><code>bool</code></td><td><code>true</code></td><td>Require schemas field in resources</td></tr>
<tr><td><code>validate_references</code></td><td><code>bool</code></td><td><code>true</code></td><td>Validate resource references</td></tr>
<tr><td><code>max_string_length</code></td><td><code>usize</code></td><td><code>1000</code></td><td>Maximum string attribute length</td></tr>
<tr><td><code>max_array_size</code></td><td><code>usize</code></td><td><code>100</code></td><td>Maximum array size</td></tr>
<tr><td><code>email_validation_strict</code></td><td><code>bool</code></td><td><code>true</code></td><td>Strict email format validation</td></tr>
<tr><td><code>phone_validation_strict</code></td><td><code>bool</code></td><td><code>false</code></td><td>Strict phone format validation</td></tr>
<tr><td><code>custom_validators_path</code></td><td><code>Option&lt;PathBuf&gt;</code></td><td><code>None</code></td><td>Path to custom validator modules</td></tr>
</tbody></table>
</div>
<h2 id="monitoring-configuration"><a class="header" href="#monitoring-configuration">Monitoring Configuration</a></h2>
<h3 id="metrics"><a class="header" href="#metrics">Metrics</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::metrics::{MetricsConfig, MetricsBackend};

let metrics_config = MetricsConfig::builder()
    .backend(MetricsBackend::Prometheus)
    .enable_http_metrics(true)
    .enable_business_metrics(true)
    .endpoint_path("/metrics")
    .collection_interval_ms(15000)
    .histogram_buckets(vec![0.001, 0.01, 0.1, 1.0, 10.0])
    .enable_detailed_labels(true)
    .build()?;
<span class="boring">}</span></code></pre></pre>
<h3 id="health-checks"><a class="header" href="#health-checks">Health Checks</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::health::{HealthConfig, HealthCheck};

let health_config = HealthConfig::builder()
    .endpoint_path("/health")
    .enable_readiness_check(true)
    .enable_liveness_check(true)
    .storage_check_timeout_ms(5000)
    .auth_check_timeout_ms(3000)
    .custom_checks(vec![
        HealthCheck::new("database", check_database_health),
        HealthCheck::new("auth_service", check_auth_service),
    ])
    .build()?;
<span class="boring">}</span></code></pre></pre>
<h2 id="environment-specific-configurations"><a class="header" href="#environment-specific-configurations">Environment-Specific Configurations</a></h2>
<h3 id="development"><a class="header" href="#development">Development</a></h3>
<pre><code class="language-toml">[server]
bind_address = "127.0.0.1:3000"
max_connections = 100
enable_cors = true
cors_origins = ["*"]

[logging]
level = "debug"
format = "text"
enable_console = true
enable_file = false
enable_request_logging = true
log_request_body = true
log_response_body = true

[storage.in_memory]
initial_capacity = 100
enable_persistence = false

[validation]
mode = "permissive"
allow_unknown_attributes = true

[auth]
enabled_methods = ["bearer"]
bearer_token_validation = "none" # Skip validation for dev
</code></pre>
<h3 id="production"><a class="header" href="#production">Production</a></h3>
<pre><code class="language-toml">[server]
bind_address = "0.0.0.0:8080"
max_connections = 2000
request_timeout_ms = 30000
enable_compression = true
thread_pool_size = 16

[logging]
level = "warn"
format = "json"
enable_console = false
enable_file = true
file_path = "/var/log/scim-server.log"
max_file_size = "100MB"
max_files = 30
enable_compression = true
enable_request_logging = false

[storage.database]
connection_url = "postgresql://scim:${SCIM_DB_PASSWORD}@postgres:5432/scim"
max_connections = 50
connection_timeout_ms = 5000
enable_ssl = true
migration_auto_run = true

[auth]
enabled_methods = ["bearer"]
bearer_token_validation = "jwt"
jwt_issuer = "https://auth.company.com"
jwt_audience = "scim-api"
jwt_public_key_url = "https://auth.company.com/.well-known/jwks.json"
token_cache_ttl_ms = 300000

[tls]
certificate_file = "/etc/ssl/certs/server.crt"
private_key_file = "/etc/ssl/private/server.key"
min_tls_version = "1.2"

[cache]
backend = "redis"
redis_url = "redis://redis:6379"
max_entries = 100000
ttl_ms = 300000

[rate_limit]
requests_per_minute = 10000
burst_size = 1000
enable_per_tenant_limits = true
storage_backend = "redis"

[validation]
mode = "strict"
enable_custom_validators = true
allow_unknown_attributes = false
require_schemas_field = true

[metrics]
backend = "prometheus"
enable_http_metrics = true
enable_business_metrics = true
endpoint_path = "/metrics"

[health]
endpoint_path = "/health"
enable_readiness_check = true
enable_liveness_check = true
</code></pre>
<h2 id="configuration-validation"><a class="header" href="#configuration-validation">Configuration Validation</a></h2>
<h3 id="automatic-validation"><a class="header" href="#automatic-validation">Automatic Validation</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::config::{Config, ConfigError};

// Configuration is automatically validated
let config = Config::from_file("config.toml")?;

// Manual validation
config.validate()?;

// Check specific sections
config.server.validate()?;
config.auth.validate()?;
config.storage.validate()?;
<span class="boring">}</span></code></pre></pre>
<h3 id="custom-validation-rules"><a class="header" href="#custom-validation-rules">Custom Validation Rules</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>use scim_server::config::{ConfigValidator, ValidationResult};

struct CustomValidator;

impl ConfigValidator for CustomValidator {
    fn validate(&amp;self, config: &amp;Config) -&gt; ValidationResult {
        let mut errors = Vec::new();
        
        // Custom business rules
        if config.server.max_connections &gt; 10000 {
            errors.push("max_connections too high for this deployment".into());
        }
        
        if config.rate_limit.requests_per_minute * config.multi_tenant.max_tenants &gt; 1000000 {
            errors.push("Combined rate limit too high".into());
        }
        
        if errors.is_empty() {
            Ok(())
        } else {
            Err(ConfigError::ValidationFailed(errors))
        }
    }
}

// Use custom validator
let config = Config::from_file("config.toml")?
    .with_validator(CustomValidator)
    .validate()?;
<span class="boring">}</span></code></pre></pre>
<h2 id="configuration-best-practices"><a class="header" href="#configuration-best-practices">Configuration Best Practices</a></h2>
<h3 id="security"><a class="header" href="#security">Security</a></h3>
<ol>
<li><strong>Never hardcode secrets</strong> - Use environment variables or secret management</li>
<li><strong>Enable TLS in production</strong> - Always use HTTPS for SCIM endpoints</li>
<li><strong>Validate JWT tokens</strong> - Use proper JWT validation with key rotation</li>
<li><strong>Set resource limits</strong> - Prevent DoS attacks with proper limits</li>
<li><strong>Enable audit logging</strong> - Track all configuration changes</li>
</ol>
<h3 id="performance"><a class="header" href="#performance">Performance</a></h3>
<ol>
<li><strong>Tune connection pools</strong> - Match database connections to expected load</li>
<li><strong>Configure caching</strong> - Enable appropriate caching for your workload</li>
<li><strong>Set timeouts</strong> - Prevent hanging requests with proper timeouts</li>
<li><strong>Monitor metrics</strong> - Enable comprehensive metrics collection</li>
<li><strong>Use compression</strong> - Enable response compression for large responses</li>
</ol>
<h3 id="reliability"><a class="header" href="#reliability">Reliability</a></h3>
<ol>
<li><strong>Enable health checks</strong> - Configure proper health check endpoints</li>
<li><strong>Set up logging</strong> - Comprehensive logging for troubleshooting</li>
<li><strong>Configure retries</strong> - Implement retry logic for transient failures</li>
<li><strong>Plan for scaling</strong> - Design configuration for horizontal scaling</li>
<li><strong>Test configurations</strong> - Validate configurations in staging environments</li>
</ol>
<p>This comprehensive configuration reference provides all the options needed to deploy and operate the SCIM Server library in any environment.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../reference/error-codes.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../reference/scim-compliance.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../reference/error-codes.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../reference/scim-compliance.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
